{% extends '@EasyAdmin/default/layout.html.twig' %}
{#{% form_theme form with easyadmin_config('design.form_theme') %}#}
{% set _content_title = ''%}{% block page_title -%}
    {{ _content_title }}
{%- endblock %}{% block content_header %}
    <h1 class="title">{{ _content_title }}</h1>
{% endblock %}
{% block main %}
    <script>
        $(document).ready(function () {
            $('.positionCount').on('change', function () {
                var sumInput = $(this).closest('.positionRow').find('.sum');
                var newInput = $(this).val() * $(sumInput).data('price');
                $(sumInput).val(newInput);
            })})

        ///////////////////////////////////////


    </script>
    <style>
        .btn span.glyphicon {
            opacity: 1;
        }
        .btn.active span.glyphicon {
            opacity: 0;
        }
        input[type=text] {
            width: 50%;
            padding: 12px 20px;
            margin: 8px 0;
            box-sizing: border-box;
            border: 2px solid green;
            border-radius: 2px;
        }
    </style>

    <center><h2 class="module-title">{{ 'admin.template.title' |trans }}</h2></center>








    <form action="/positiondata" method="post">
        <input name="id" hidden value="{{ id }}" />
        <center><input name="title" type="text" value="{{ title }}"/></center>
        <table class="table">

            <tr>
                <th scope="col"><p class="lead" align="center">âœ”</p></th>
                <th scope="col"><p class="lead" align="center">Pozicija</p></th>
                <th scope="col"><p class="lead" align="center">Kiekis</p></th>
                <th scope="col"><p class="lead" align="center">Vieneto kaina</p></th>
                <th scope="col"><p class="lead" align="center">Suma</p></th>
            </tr>

            <tbody>

        {% for position in positionItems %}

            <tr class="positionRow">
                <td>
                    <div class="btn-group" data-toggle="buttons">

                        <label class="btn btn-success active">
                            <input name='active[{{ position.id }}]' type="checkbox" autocomplete="off"
                                    {% if position.count > 0 %}
                            checked
                                    {% endif %}/>
                            <span class="glyphicon glyphicon-ok"></span>
                        </label>
                    </div>
                </td>
                <td><p class="lead" align="center">{{ position.name }}</p></td>
                <td><p align="center"><input  class="positionCount"  name='count[{{ position.id }}]' type="text" value="{{ position.count }}"/></td></p>
                <td><p align="center"><input class="positionPrice" type="text" disabled value="{{ position.price }}"/></td></p>
                <td><p align="center"><input  class="sum" type="text" disabled data-price={{ position.price }} value={{ position.price*position.count }}></td></p>
            </tr>


        {% endfor %}
            </tbody>
        </table>

        <center>
            <button class="button button1">Green</button>


    </form>
{% endblock %}